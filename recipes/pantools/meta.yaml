{% set name = "pantools" %}
{% set version = "3.3.4" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  # we need git_url to check out submodules as the release tarball does not contain these
  git_url: https://git.wur.nl/bioinformatics/pantools.git
  git_rev: {{ version }}
  git_depth: -1

build:
  number: 0

requirements:
  build:
    - openjdk =8
    - maven
    - git
    # needed for submodule compilation
    - {{ compiler('cxx') }}
  run:
    # based on /conda.yml file in repo, with build-only dependencies removed (i.e., 'maven')
    - openjdk=8
    - python>=3.7
    - kmc=3
    - mcl
    - mafft
    - iqtree
    - fasttree
    - blast
    - mash=2.3
    - fastani
    - busco=5.2.2
    - r-base=3.4.3
    - r-ggplot2=2.2.1
    - r-ape=5.0
    - graphviz


test:
  commands:
    # should exit with return code 0
    - pantools version

about:
  home: https://git.wur.nl/bioinformatics/pantools
  license: GPL-3.0-only
  license_family: GPL
  license_file: LICENSE
  summary: "PanTools is a pangenomic toolkit for comparative analysis of large number of genomes."
  description: |
    PanTools is a pangenomic toolkit for comparative analysis of large number
    of genomes. It is developed in the Bioinformatics Group of Wageningen
    University, the Netherlands. Please cite the relevant publication(s) from
    the list of publications if you use PanTools in your research.


extra:
  notes: |
    PanTools is Java program that comes with a custom wrapper Python script.
    This wrapper is called "pantools" and is on $PATH by default. By default
    "-Xms512m -Xmx1g" is set in the wrapper. If you want to overwrite it you can
    specify these values directly after your binaries. If you have _JAVA_OPTIONS
    set globally this will take precedence.
    For example run it with "pantools -Xms512m -Xmx1g"
  identifiers:
    - doi:https://doi.org/10.1093/bioinformatics/btw455
    - doi:https://doi.org/10.1186/s12859-018-2362-4
    - doi:https://doi.org/10.1101/813634
    - biotools:PanTools
  skip-lints:
    # necessary for git_url
    - uses_vcs_url
    - missing_hash
